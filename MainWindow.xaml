<Window x:Class="GhostBar.MainWindow"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        Width="500" Height="250"
        WindowStyle="None"
        ResizeMode="NoResize"
        AllowsTransparency="True"
        Background="Transparent"
        Topmost="True"
        ShowInTaskbar="False"
        Title="GhostBar">

    <Grid>
        <!-- Top Control Bar -->
        <Border x:Name="TopBar"
                CornerRadius="20"
                Background="#DD3d3d5c"
                Padding="4"
                Margin="0 0 0 60"
                VerticalAlignment="Top"
                HorizontalAlignment="Center"
                Height="40"
                MouseLeftButtonDown="TopBar_MouseLeftButtonDown"
                Cursor="SizeAll">
            <StackPanel Orientation="Horizontal" VerticalAlignment="Center">
                <!-- Refresh/Reset Button -->
                <Button x:Name="ResetButton" 
                        Click="ResetButton_Click"
                        Background="Transparent"
                        BorderThickness="0"
                        Padding="8,6"
                        Cursor="Hand"
                        Margin="0,0,8,0">
                    <Button.Template>
                        <ControlTemplate TargetType="Button">
                            <Border Background="{TemplateBinding Background}" 
                                    Padding="{TemplateBinding Padding}">
                                <Path Data="M17.65,6.35C16.2,4.9 14.21,4 12,4A8,8 0 0,0 4,12A8,8 0 0,0 12,20C15.73,20 18.84,17.45 19.73,14H17.65C16.83,16.33 14.61,18 12,18A6,6 0 0,1 6,12A6,6 0 0,1 12,6C13.66,6 15.14,6.69 16.22,7.78L13,11H20V4L17.65,6.35Z" 
                                      Fill="#8899aa" 
                                      Width="16" Height="16" 
                                      Stretch="Uniform"/>
                            </Border>
                        </ControlTemplate>
                    </Button.Template>
                </Button>

                <!-- Hide Button -->
                <Button x:Name="HideButton" 
                        Content="Hide" 
                        Click="HideButton_Click"
                        Background="#2563eb"
                        Foreground="White"
                        BorderThickness="0"
                        Padding="16,6"
                        FontSize="13"
                        FontWeight="SemiBold"
                        Cursor="Hand">
                    <Button.Template>
                        <ControlTemplate TargetType="Button">
                            <Border Background="{TemplateBinding Background}" 
                                    CornerRadius="16" 
                                    Padding="{TemplateBinding Padding}">
                                <ContentPresenter HorizontalAlignment="Center" VerticalAlignment="Center"/>
                            </Border>
                        </ControlTemplate>
                    </Button.Template>
                </Button>
                
                <!-- Grid Icon Button -->
                <Button x:Name="MenuButton" 
                        Click="MenuButton_Click"
                        Background="Transparent"
                        BorderThickness="0"
                        Padding="10,6"
                        Cursor="Hand"
                        Margin="8,0,0,0">
                    <Button.Template>
                        <ControlTemplate TargetType="Button">
                            <Border Background="{TemplateBinding Background}" Padding="{TemplateBinding Padding}">
                                <Grid Width="16" Height="16">
                                    <!-- 6 dots grid -->
                                    <Ellipse Width="4" Height="4" Fill="#8899aa" HorizontalAlignment="Left" VerticalAlignment="Top"/>
                                    <Ellipse Width="4" Height="4" Fill="#8899aa" HorizontalAlignment="Center" VerticalAlignment="Top"/>
                                    <Ellipse Width="4" Height="4" Fill="#8899aa" HorizontalAlignment="Right" VerticalAlignment="Top"/>
                                    <Ellipse Width="4" Height="4" Fill="#8899aa" HorizontalAlignment="Left" VerticalAlignment="Bottom"/>
                                    <Ellipse Width="4" Height="4" Fill="#8899aa" HorizontalAlignment="Center" VerticalAlignment="Bottom"/>
                                    <Ellipse Width="4" Height="4" Fill="#8899aa" HorizontalAlignment="Right" VerticalAlignment="Bottom"/>
                                </Grid>
                            </Border>
                        </ControlTemplate>
                    </Button.Template>
                </Button>
                
                <!-- Close Button -->
                <Button x:Name="CloseButton" 
                        Content="✕" 
                        Click="CloseButton_Click"
                        Background="Transparent"
                        Foreground="#8899aa"
                        BorderThickness="0"
                        Padding="10,6"
                        FontSize="14"
                        Cursor="Hand"
                        Margin="4,0,0,0">
                    <Button.Template>
                        <ControlTemplate TargetType="Button">
                            <Border Background="{TemplateBinding Background}" 
                                    CornerRadius="12" 
                                    Padding="{TemplateBinding Padding}">
                                <ContentPresenter HorizontalAlignment="Center" VerticalAlignment="Center"/>
                            </Border>
                        </ControlTemplate>
                    </Button.Template>
                </Button>
            </StackPanel>
        </Border>

        <!-- Main Input Area -->
        <Border CornerRadius="16"
                Background="#DD2d3748"
                BorderBrush="#556677"
                BorderThickness="1"
                Padding="12"
                Margin="0 50 0 0"
                VerticalAlignment="Top">
            <Grid>
                <Grid.ColumnDefinitions>
                    <ColumnDefinition Width="Auto"/>
                    <ColumnDefinition Width="*"/>
                    <ColumnDefinition Width="Auto"/>
                </Grid.ColumnDefinitions>

                <!-- Home Icon -->
                <Border Grid.Column="0" 
                        Background="Transparent" 
                        Padding="8,0,12,0"
                        VerticalAlignment="Center">
                    <Path Data="M10,20V14H14V20H19V12H22L12,3L2,12H5V20H10Z" 
                          Fill="#99ccdd" 
                          Width="18" Height="18" 
                          Stretch="Uniform"/>
                </Border>

                <!-- Input TextBox -->
                <TextBox x:Name="PromptTextBox"
                         Grid.Column="1"
                         Background="Transparent"
                         Foreground="#ddeeff"
                         BorderThickness="0"
                         Padding="8,10"
                         FontSize="14"
                         VerticalAlignment="Center"
                         CaretBrush="#ddeeff"
                         KeyDown="PromptTextBox_KeyDown">
                    <TextBox.Style>
                        <Style TargetType="TextBox">
                            <Setter Property="Template">
                                <Setter.Value>
                                    <ControlTemplate TargetType="TextBox">
                                        <Grid>
                                            <ScrollViewer x:Name="PART_ContentHost" VerticalAlignment="Center"/>
                                            <TextBlock x:Name="Placeholder" 
                                                       Text="Click to type, or ↑ ↵ for assist"
                                                       Foreground="#8899aa"
                                                       Padding="8,10"
                                                       FontSize="14"
                                                       VerticalAlignment="Center"
                                                       Visibility="Collapsed"/>
                                        </Grid>
                                        <ControlTemplate.Triggers>
                                            <Trigger Property="Text" Value="">
                                                <Setter TargetName="Placeholder" Property="Visibility" Value="Visible"/>
                                            </Trigger>
                                        </ControlTemplate.Triggers>
                                    </ControlTemplate>
                                </Setter.Value>
                            </Setter>
                        </Style>
                    </TextBox.Style>
                </TextBox>

                <!-- Send Button -->
                <Button x:Name="SendButton" 
                        Grid.Column="2"
                        Click="SendButton_Click"
                        Background="#2563eb"
                        BorderThickness="0"
                        Padding="8"
                        Cursor="Hand"
                        Margin="8,0,0,0">
                    <Button.Template>
                        <ControlTemplate TargetType="Button">
                            <Border Background="{TemplateBinding Background}" 
                                    CornerRadius="14" 
                                    Padding="{TemplateBinding Padding}"
                                    Width="32" Height="32">
                                <Path Data="M2,21L23,12L2,3V10L17,12L2,14V21Z" 
                                      Fill="White" 
                                      Width="14" Height="14" 
                                      Stretch="Uniform"
                                      HorizontalAlignment="Center"
                                      VerticalAlignment="Center"/>
                            </Border>
                        </ControlTemplate>
                    </Button.Template>
                </Button>
            </Grid>
        </Border>

        <!-- Response Area -->
        <Border x:Name="ResponseBorder"
                CornerRadius="12"
                Background="#DD2d3748"
                BorderBrush="#556677"
                BorderThickness="1"
                Padding="12"
                Margin="0 115 0 0"
                VerticalAlignment="Top"
                MaxHeight="120"
                Visibility="Collapsed">
            <ScrollViewer VerticalScrollBarVisibility="Auto">
                <TextBlock x:Name="ResponseTextBlock"
                           TextWrapping="Wrap"
                           Foreground="#ccddee"
                           FontSize="13"/>
            </ScrollViewer>
        </Border>
    </Grid>

    <!-- Response area (hidden by default, shown when there's a response) -->
</Window>
